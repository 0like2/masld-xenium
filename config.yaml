# ============================================================================
# Xenium ë¶„ì„ íŒŒì´í”„ë¼ì¸ ì„¤ì • íŒŒì¼
# ============================================================================

# ============================================================================
# 1ï¸âƒ£ ë°ì´í„° ê²½ë¡œ ì„¤ì • (í•„ìˆ˜!)
# ============================================================================

data:
  # Xenium ë°ì´í„° ê²½ë¡œ (h5ad íŒŒì¼ ë˜ëŠ” ì›ë³¸ ë””ë ‰í† ë¦¬)
  # h5ad íŒŒì¼ ì‚¬ìš© (ê¶Œì¥, ë¹ ë¦„):
  #   - ./data/unprocessed_adata/ms_brain_rep1.h5ad
  #   - ./data/unprocessed_adata/h_breast_1.h5ad
  xenium_input_path: "./data/unprocessed_adata/human_brain.h5ad"

  # ê²°ê³¼ ì €ì¥í•  ë””ë ‰í† ë¦¬
  # ì´ ë””ë ‰í† ë¦¬ê°€ ì—†ìœ¼ë©´ ìë™ ìƒì„±ë¨
  output_path: "./output"

  # ìƒ˜í”Œ ì´ë¦„ (ìƒì„±ë˜ëŠ” íŒŒì¼ì˜ prefixë¡œ ì‚¬ìš©)
  sample_tag: "human_brain"


# ============================================================================
# 2ï¸âƒ£ íŒŒì´í”„ë¼ì¸ ì‹¤í–‰ ë‹¨ê³„ ì„¤ì •
# ============================================================================
pipeline:
  # ì‹¤í–‰í•  ë‹¨ê³„ ì§€ì •
  # í•„ìˆ˜: [0, 1, 6]  (~30ë¶„)
  # ê¶Œì¥: [0, 1, 2, 4, 6]  (~1ì‹œê°„, ì‹¬í™” ë¶„ì„ í¬í•¨)
  # ì „ì²´: [0, 1, 2, 3, 4, 5, 6]  (~2ì‹œê°„, ëª¨ë“  ë¶„ì„)
  steps:
    - 0  # Step 0: ë°ì´í„° í¬ë§·íŒ…
    - 1  # Step 1: ì „ì²˜ë¦¬
    - 6  # Step 6: ì „ì²˜ë¦¬ ìµœì í™”
    # - 2  # Step 2: ì„¸í¬ì§ˆ-í•µ ë¶„ì„ (ì„ íƒ)
    # - 4  # Step 4: ìµœì  ê±°ë¦¬ (ì„ íƒ)
    # - 5  # Step 5: ë¶„í•  ë²¤ì¹˜ë§ˆí¬ (ì„ íƒ)
    # - 3  # Step 3: í”Œë«í¼ ë¹„êµ (ì„ íƒ)


# ============================================================================
# 3ï¸âƒ£ ì „ì²˜ë¦¬ íŒŒë¼ë¯¸í„° (Step 1)
# ============================================================================
preprocessing:
  # ì •ê·œí™” ê¸°ì¤€ê°’
  # ê¶Œì¥: 100 (ë…¼ë¬¸ì—ì„œ ê²€ì¦ë¨, 618ê°€ì§€ ì¡°í•© ì¤‘ ìµœì )
  # ì„ íƒì§€: 100, None
  target_sum: 100

  # ìµœì†Œ ì¹´ìš´íŠ¸ í•„í„°
  # ì„¸í¬ë‹¹ ìµœì†Œ ì¹´ìš´íŠ¸ ìˆ˜ (ë„ˆë¬´ ë‚®ìœ¼ë©´ ë…¸ì´ì¦ˆ ì¦ê°€)
  mincounts: 10

  # ìµœì†Œ ìœ ì „ì í•„í„°
  # ì„¸í¬ë‹¹ ìµœì†Œ ìœ ì „ì ë°œí˜„ ìˆ˜
  mingenes: 3

  # ìµœê·¼ì ‘ ì´ì›ƒ ìˆ˜ (KNN)
  neigh: 15

  # í‘œì¤€í™” (Scaling)
  # âœ“ False ê¶Œì¥: ê³µê°„ ë°ì´í„°ì—ì„œ í‘œì¤€í™”í•˜ë©´ ì‹ í˜¸ ì†ì‹¤
  # ì„ íƒì§€: True, False
  scale: False

  # ê³ ë³€ì´ ìœ ì „ì ì„ íƒ
  # âœ“ False ê¶Œì¥: ëª¨ë“  ìœ ì „ì ì‚¬ìš©ì´ ë” ì •í™• (ì €ë°œí˜„ ìœ ì „ìë„ ê³µê°„ íŒ¨í„´ ì •ë³´ í¬í•¨)
  # ì„ íƒì§€: True, False
  hvg: False


# ============================================================================
# 4ï¸âƒ£ Stepë³„ íŒŒë¼ë¯¸í„°
# ============================================================================
step_parameters:

  # Step 2: ì„¸í¬ì§ˆ-í•µ ë¶„ì„
  step2:
    # ë°ì´í„° ìƒ˜í”Œë§ ë¹„ìœ¨ (ë©”ëª¨ë¦¬ íš¨ìœ¨)
    # - 1.0: ì „ì²´ ì‚¬ìš© (ê°€ì¥ ì •í™•í•˜ì§€ë§Œ ëŠë¦¼)
    # - 0.1: 10% ìƒ˜í”Œë§ (ê¶Œì¥, ë¹ ë¥´ê³  ì¶©ë¶„í•¨)
    # - 0.05: 5% ìƒ˜í”Œë§ (ë§¤ìš° ë¹ ë¦„)
    sample_fraction: 0.1

  # Step 4: ìµœì  í™•ì¥ ê±°ë¦¬
  step4:
    # ê±°ë¦¬ ë²”ìœ„ (Âµm)
    # - min_distance: ìµœì†Œ ê±°ë¦¬
    # - max_distance: ìµœëŒ€ ê±°ë¦¬
    min_distance: 5
    max_distance: 20

  # Step 6: ì „ì²˜ë¦¬ ì‹œë®¬ë ˆì´ì…˜
  step6:
    # ë°ì´í„° ìƒ˜í”Œë§ ë¹„ìœ¨ (ë©”ëª¨ë¦¬ íš¨ìœ¨)
    # - 0.1: 10% ìƒ˜í”Œ (ì •í™•í•¨, 30ë¶„)
    # - 0.05: 5% ìƒ˜í”Œ (ê¶Œì¥, 15ë¶„)
    # - 0.02: 2% ìƒ˜í”Œ (ë¹ ë¦„, 5ë¶„)
    sample_size: 0.05

  # Step 7: Ground Truth ìƒì„± (Step 0ì—ì„œ ì‹¤í–‰ë¨)
  step7:
    # í™œì„±í™” ì—¬ë¶€
    enabled: False
    # ì¡°ì§ ìœ í˜• (brain, breast ë“±)
    tissue_type: "brain"
    # ë‹¤ìš´ë¡œë“œ ê²½ë¡œ
    download_dir: "data/reference"


# ============================================================================
# 5ï¸âƒ£ ë¡œê¹… ë° ì¶œë ¥ ì„¤ì •
# ============================================================================
logging:
  # ë¡œê·¸ ë ˆë²¨
  # - DEBUG: ëª¨ë“  ì •ë³´ (ë§¤ìš° ìƒì„¸)
  # - INFO: ì§„í–‰ ìƒí™© + ê²°ê³¼ (ê¶Œì¥)
  # - WARNING: ê²½ê³  + ì—ëŸ¬ë§Œ
  # - ERROR: ì—ëŸ¬ë§Œ
  level: "INFO"

  # ì§„í–‰ ìƒí™© í‘œì‹œ
  verbose: True

  # ë¡œê·¸ íŒŒì¼ ì €ì¥
  save_log: True
  log_file: "xenium_pipeline.log"


# ============================================================================
# 6ï¸âƒ£ ë©”ëª¨ë¦¬ ë° ì„±ëŠ¥ ì„¤ì •
# ============================================================================
performance:
  # ìµœëŒ€ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ (GB, ì„ íƒì‚¬í•­)
  # 0 = ì œí•œ ì—†ìŒ (ê¸°ë³¸)
  max_memory_gb: 0

  # ë³‘ë ¬ ì²˜ë¦¬ ìŠ¤ë ˆë“œ ìˆ˜
  # 0 = ìë™ ê°ì§€ (ê¶Œì¥)
  n_jobs: 0

  # í° ë°°ì—´ì„ ìœ„í•´ ë©”ëª¨ë¦¬ ë§¤í•‘ ì‚¬ìš©
  use_memory_mapping: False


# ============================================================================
# 7ï¸âƒ£ Xenium í¬ë§· ì„ íƒ
# ============================================================================
# ë‹¹ì‹ ì˜ Xenium ë°ì´í„° ë²„ì „ì„ ì„ íƒí•˜ì„¸ìš”
xenium_format:
  # Xenium ì¶œë ¥ í¬ë§· ë²„ì „
  # - "2024": í˜„ì¬ Xenium í¬ë§· (ê¶Œì¥, mid-2023 ì´ìƒ)
  # - "2023": 2023 ì´ˆë°˜ Xenium í¬ë§·
  # - "2022": 2022 Xenium í¬ë§· (êµ¬í˜•)
  version: "2024"

  # ìë™ í¬ë§· ê°ì§€ (ë¯¸ì§€ì›, ìˆ˜ë™ìœ¼ë¡œ ì„ íƒ)
  auto_detect: False


# ============================================================================
# 8ï¸âƒ£ ê³ ê¸‰ ì„¤ì • (ì¼ë°˜ì ìœ¼ë¡œ ìˆ˜ì •í•˜ì§€ ì•ŠìŒ)
# ============================================================================
advanced:
  # PCA ì„±ë¶„ ìˆ˜ (ì „ì²˜ë¦¬)
  # 0 = ì „ì²´ ì‚¬ìš© (ê¶Œì¥)
  n_pcs: 0

  # í´ëŸ¬ìŠ¤í„°ë§ í•´ìƒë„ (resolution)
  # ë†’ì„ìˆ˜ë¡ í´ëŸ¬ìŠ¤í„° ë§ìŒ
  leiden_resolution: 1.4
  louvain_resolution: 1.4

  # ëª©í‘œ í´ëŸ¬ìŠ¤í„° ìˆ˜
  target_clusters: 30

  # ìŠ¤íŒŒìŠ¤ í–‰ë ¬ ì‚¬ìš© (ë©”ëª¨ë¦¬ ì ˆì•½)
  use_sparse_matrix: True


# ============================================================================
# ğŸ¯ ë¹ ë¥¸ ì°¸ê³ 
# ============================================================================
#
# 1. í•„ìˆ˜ ìˆ˜ì • (ì²˜ìŒ ì‚¬ìš©ì):
#    - xenium_input_path: ë‹¹ì‹ ì˜ Xenium ë°ì´í„° ê²½ë¡œ
#    - sample_tag: ìƒ˜í”Œ ì´ë¦„
#
# 2. ì‹¤í–‰:
#    python xenium_pipeline_main.py
#
# 3. ê²°ê³¼:
#    output/
#    â”œâ”€â”€ {sample_tag}_step0_formatted.h5ad
#    â”œâ”€â”€ {sample_tag}_step1_preprocessed.h5ad
#    â””â”€â”€ {sample_tag}_step6_ari_scores.csv
#
# 4. ì˜µì…˜:
#    - ë¹ ë¥¸ ë¶„ì„: steps = [0, 1]
#    - í‘œì¤€ ë¶„ì„: steps = [0, 1, 6]
#    - ì™„ì „ ë¶„ì„: steps = [0, 1, 2, 4, 6]
#
# ============================================================================
